\makeatletter
\usepackage{amsthm,amsmath,amssymb}
\usepackage{mathrsfs}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{fancyvrb}
\usepackage{listings}
\usepackage{marginnote}
\usepackage[inner=1in,textwidth=30pc,top=1in,marginparwidth=10pc,marginparsep=1.5pc]{geometry}
\usepackage[nottoc,numbib]{tocbibind}
\usepackage[12hr,us]{datetime}
\usepackage[final,colorlinks=true, 
            hyperindex=true,
            citecolor=black,
            filecolor=black,
            menucolor=black,
            linkcolor=black,
            urlcolor=black,
            bookmarksopen=true,
            pdfauthor={Alex Nelson}]{hyperref}
\usepackage[all]{hypcap}

\definecolor{Brown}{cmyk}{0,0.81,1,0.60}
\definecolor{OliveGreen}{cmyk}{0.64,0,0.95,0.40}
\definecolor{CadetBlue}{cmyk}{0.62,0.57,0.23,0}
\definecolor{lightlightgray}{gray}{0.9}

\lstset{
language=C,                             % Code langugage
basicstyle=\footnotesize\ttfamily,      % Code font, Examples: \footnotesize, \ttfamily
keywordstyle=\color{OliveGreen},        % Keywords font ('*' = uppercase)
commentstyle=\color{gray},              % Comments font
numbers=left,                           % Line nums position
numberstyle=\tiny,                      % Line-numbers fonts
stepnumber=1,                           % Step between two line-numbers
numbersep=5pt,                          % How far are line-numbers from code
backgroundcolor=\color{lightlightgray}, % Choose background color
frame=none,                             % A frame around the code
tabsize=2,                              % Default tab size
captionpos=b,                           % Caption-position = bottom
breaklines=true,                        % Automatic line breaking?
breakatwhitespace=false,                % Automatic breaks only at whitespace?
showspaces=false,                       % Dont make spaces visible
showtabs=false,                         % Dont make tabls visible
%columns=flexible,                       % Column format
morekeywords={__global__, __device__},  % CUDA specific keywords
}

\author{Alex Nelson\footnote{This is a page from \url{http://code.google.com/p/notebk/}\hfil\break\indent\;\, Compiled:\enspace\today\ at \currenttime\ (PST)}\\\texttt{Email:\enspace\href{mailto:pqnelson@gmail.com}{pqnelson@gmail.com}}}

\def\marginpar#1{\marginnote{\footnotesize\emph{#1}}}

\providecommand{\bysame}{\leavevmode\hbox to3em{\hrulefill}\thinspace}
% chunks
\@ifundefined{@addpunct}{
  \def\@addpunct#1{\ifnum\spacefactor>\@m \else#1\fi}
  }{}

\newcounter{M}[section]
\newcounter{MM}[M]
\renewcommand\theM{\arabic{section}.\arabic{M}}
\renewcommand\theMM{\theM.\arabic{MM}}

\def\M{\medbreak\noindent\refstepcounter{M}\textbf{\theM\@addpunct{.}\quad}\ignorespaces}
\def\N{\@ifstar
        \NStar%
        \NNoStar%
}
\def\NStar#1{\medbreak\noindent\textbf{#1\@addpunct{.}\quad}\ignorespaces}
\def\NNoStar#1{\M\textbf{#1\@addpunct{.}\quad}\ignorespaces}

\def\Mref#1{(\S\ref{#1})}
% definitions
\newcommand\define[1]{``\textbf{#1}''}

% theorems
\renewcommand{\thmhead}[3]{\thmname{#1}\thmnumber{ #2.\quad\ignorespaces}\thmnote{ (#3)}}
%\swapnumbers
\newtheoremstyle{mytheoremstyle} % name
    {\medskipamount}             % Space above
    {\medskipamount}              % Space below
    {\itshape}                   % Body font
    {}                           % Indent amount
    {\bfseries}                  % Theorem head font
    {.}                        % Punctuation after theorem head
    {1em}                        % Space after theorem head
    {\thmnumber{#2}.\quad\thmname{#1}\thmnote{ \normalfont{(#3)}}}
\newtheoremstyle{mydefnstyle}% name
    {\medskipamount}% Space above
    {\medskipamount}              % Space below
    {\normalfont}                   % Body font
    {}                           % Indent amount
    {\bfseries}                  % Theorem head font
    {.}                         % Punctuation after theorem head
    {1em}                        % Space after theorem head
    {\thmnumber{#2.\quad}\thmname{#1}\thmnote{ \normalfont{(#3)}}}  % Theorem head spec (can be left empty, meaning 'normal')
\newtheoremstyle{myrmkstyle}% name
    {\medskipamount}% Space above
    {\medskipamount}              % Space below
    {\normalfont}                   % Body font
    {}                           % Indent amount
    {\itshape}                  % Theorem head font
    {.}                         % Punctuation after theorem head
    {1em}                        % Space after theorem head
    {\thmnumber{#2}.\quad\thmname{#1}\thmnote{ \normalfont{(#3)}}}  % Theorem head spec (can be left empty, meaning 'normal')

\theoremstyle{mytheoremstyle}
\newtheorem{thm}[M]{Theorem}
\newtheorem{lemma}[M]{Lemma}
\newtheorem{cor}[MM]{Corollary}

\theoremstyle{mydefnstyle}%definition}
\newtheorem*{axiom}{Axiom}
\newtheorem{prop}[M]{Proposition}
\newtheorem{defn}[M]{Definition}
\newtheorem{ex}[M]{Example}

\theoremstyle{myrmkstyle}
\newtheorem{rmk}[MM]{Remark}

\numberwithin{equation}{section}

% exercise 
\font\manual=manfnt
\newcounter{xca}
\def\xca{\smallbreak\noindent\refstepcounter{xca}\llap{\manual x\hskip3pt}\textbf{Exercise \thexca.\enspace\relax}\ignorespaces}
\def\endxca{}

% section
\def\sectionfont{\large\sffamily\bfseries}
\def\subsectionfont{\sffamily\bfseries}
\def\specialsection{\@startsection{section}{1}%
  \z@{.7\baselineskip\@plus\baselineskip}{.125\baselineskip}%
  {\sectionfont}}
\def\section{\@startsection{section}{1}%
  \z@{.7\baselineskip\@plus\baselineskip}{.125\baselineskip}%
  {\sectionfont}}
\def\subsection{\@startsection{subsection}{2}%
  \z@{.7\baselineskip\@plus\baselineskip}{.125\baselineskip}%
  {\subsectionfont}}
\def\subsubsection{\@startsection{subsubsection}{3}%
  \z@{.7\baselineskip\@plus\baselineskip}{.125\baselineskip}%
  {\subsectionfont}}



% arXiv links
\def\arXiv{\@ifnextchar[{\@arXivWith}{\@arXivWithout}}
\def\@arXivWith[#1]#2{\texttt{\href{http://arxiv.org/abs/#2}{arXiv:#2} [#1]}}
\def\@arXivWithout#1{\texttt{\href{http://arxiv.org/abs/#1}{arXiv:#1}}}

%% notation
\def\Pr{\mathop{\mathrm{Pr}}\nolimits}
\def\eqdef{\stackrel{\text{def}}{=}}
\newcommand\expected{\mathrm{E}}
\def\Var{\mathop{\mathrm{Var}}\nolimits}
\def\cov{\mathop{\mathrm{Cov}}\nolimits}

% sets
\newcommand\CC{\mathbb{C}}
\newcommand\NN{\mathbb{N}}
\newcommand\QQ{\mathbb{Q}}
\newcommand\RR{\mathbb{R}}
\newcommand\ZZ{\mathbb{Z}}
\newcommand\sampleSpace{\Omega}
\newcommand\comp[1]{{#1}^{\complement}}
\newcommand\powerset{\mathcal{P}}
\def\hom{\mathop{\mathrm{Hom}}\nolimits}
\let\propersubset\subset
\let\subset\subseteq
\let\propersupset\supset
\let\supset\supseteq

% calculus
\def\D{\mathrm{d}}
\def\E{\mathrm{e}}
\let\oldRe\Re
\def\Re{\mathop{\mathrm{Re}}\nolimits}
\def\bigO{\mathcal{O}}

% number theory
\def\intPart#1{\mathop{\texttt{[}}\nolimits\!#1\!\mathop{\texttt{]}}\nolimits}
\def\fracPart#1{\mathop{\{}\nolimits\!#1\!\mathop{\}}\nolimits}

% group theory
\newcommand\udot{\mathop{{}^{\textstyle .}}\nolimits}

% complex analysis
\newcommand\Res[2][z]{\mathop{\mathrm{Res}}\nolimits_{#1}#2}

% linear algebra
\let\<\langle
\let\>\rangle
\newcommand\End{\mathop{\mathrm{End}}\nolimits}
\newcommand\superb[2]{\ensuremath{[#1,#2\}}}
\def\Mat{\mathop{\mathrm{Mat}}\nolimits}
\def\normOrd#1{\mathop{:}\nolimits\!#1\!\mathop{:}\nolimits}

% bibliography
\let\newblock\newline

\makeatother
